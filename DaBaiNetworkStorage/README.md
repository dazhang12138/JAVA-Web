# 大白网盘

> 小型网盘存储系统
> >## **Mr.Da**
> <img src="http://i.imgur.com/zinCKRK.png" width="" height="35"/>
>

## 初步设想

整个项目采用前后端分离的方式进行布局。

### 使用技术

1. 后台语言：JAVA
2. 前台使用：node.js+icop平台组件库
3. 包管理：Maven
4. 数据库：MongoDB（Oracle）
5. 框架：SpringMVC+Spring

考虑数据库是否使用MongoDb如果使用MongoDB则不使用mybatis框架，如果使用Oracle数据库则采用SSM框架。

### 主要功能

1. 模拟仿照百度网盘，实现用户管理和文件管理。
2. 用户登录注册找回密码，个人信息管理
3. 用户文件上传下载分享保存
4. 管理员管理用户（待定是否需要管理员）

### logo设计

![](https://i.imgur.com/43KmWoO.png)

### 数据库设计

![](https://i.imgur.com/cWkGHE1.png)

暂定为这样，有不少地方后续进行修改。

**修改记录**
	
1. 将用户下的files字段进行了内容的修改，改为files下为一个数组每个里面包含filesId字段、files字段、file字段。其中files为循环重复。
2. 去除文件夹表中的file字段
3. **分享表加入分享期限标识**
4. **文件表加入Md5标识**

### 权限设想

初步设想

| 权限 | 普通用户| VIP用户|
| :--: | :--: | :--: |
| 存储容量 | 500G | 2T |
| 单文件上传限制 | 2G | 3G |
| 转存文件限制 | <1000 | <3000|
| 批量文件上传限制 | <100 | < 500 |
| 回收站有效期 | 10天 | 15天 |
| 云解压功能 | 否 | 500M以内|
| 云视频播放 | 否 | 是|
| 文档在线编辑 | 否 | 是|
| 全文检索 | 否 | 否|
| 急速下载 | 否 | 是|
| 身份标识 | 否 | Ⅵ |
| 垃圾文件清除 | 否 | Md5扫描相同文件 |
| 建群 | 否 | 可以 |

**注意：**VIP用户功能不采用充值方式实现。不能实现实时充值到账，支付宝、微信等支付不能申请接口。


## 项目目录
	
	——yylib-sample  --前端
	——dabai --后端

# 实现记录

## 任务实现

> 粗体为暂未实现或考虑是否实现

1.	用户登录功能
	- 表单实现(登录名、登录密码；**【记住用户】**)
	- 表单值校验（前端不校验，在后端接受值后校验不能为空）
	- **返回信息提示**
	- 数据库查询
2. 用户注册功能
	- 表单实现(昵称、用户登录名、登录密码、密码二次验证、预留邮箱；**【注册完直接登录】**)
	- 表单值校验（前端首先进行完整校验，后端二次进行非空校验）
	- 提示信息（表单值校验结果显示，注册结果反馈页面显示，**邮箱校验结果信息改为英文**）
	- 创建用户文件夹(在服务器‘D:/DB_Files’文件夹下为大白网盘文件数据存储物理位置，以用户为单位存储，一个用户的文件存储在一个文件夹下，为此用户的根文件夹。名称为此用户昵称)
	- 保存用户数据
	- 保存文件夹数据
	- **邮箱实名验证**


## 逻辑实现
	
1.	**用户登录功能**
	- 表单输入登录名和登录密码
	- Ajax链接后端
		- url='http://localhost:8080/dabai/User/Login'
		- data=userName,userPwd 
		- method = POST
	- 后端接受数据(需要使用实体类方法接收) 
		- 参数值非空验证
	- 看参数是否记住用户登录信息，实现下次直接登录**（考虑是否实现）**
	- 数据库查询用户是否存在
		- 存在返回用户信息
		- 不存在返回null，
	- 结果反馈给前端
	- 反馈结果提示
		- 登录失败：提示
		- 登录成功：跳转到主页
2.	**用户注册功能**
	- 表单输入用户基本信息（昵称，登录名，密码，邮箱）
	- 表单值实时校验
		- 昵称和登录名需要数据库唯一值校验
			- 统一校验ajax地址url = 'http://localhost:8080/dabai/User/UserVerify'
		- 邮箱实现发送邮件验证 **（考虑是否需要实现）**
		- 密码需要二次输入
	- Ajax链接后端
		- url = 'http://localhost:8080/dabai/User/Register'
		- data = userName,userPwd,name,userEmail
		- method = POST
	- 后端接受数据（需要实体类方法接收）
		- 参数值非空验证
	- 创建用户根文件夹（物理位置）
		- 服务器物理存储位置：D:/ DB_Files
		- 文件夹名称为用户昵称
		- 之后此用户的所有文件存储在这个服务器的这个目录下
	- 保存文件夹信息到库
	- 保存用户信息到库
	- 结果反馈给前端
		- 全部成功操作则返回true
		- 否则失败一步则返回false。MongoDB数据库没有事务操作
	- 反馈结果提示
		- true：看是否直接登录，如果直接登录则直接进入用户主页，否则提示注册成功
		- false：提示注册失败



# 功能设想

1. 是否可以通过记录每个文件的MD5值，达到秒速上传功能。
2. 因为系统为高并发性的，是否实现mongoDB的集群。
3. 实现定时任务，一月一次或者一星期一次扫描文件目录和数据库，清楚脏数据
4. 考虑上传文件实现加密
5. 实现在线预览文档、在线播放视频、在线听音乐、在线打开压缩包等扩展功能
6. 垃圾文件清理功能，初步设想为设置文件MD5属性，扫描文件MD5属性清楚相同。
7. 考虑实现用户留言、消息通知、系统通知之类的
8. 考虑实现用户间互为好友、好友间相互对话、创建群聊

## 主页三大模块

> 粗体为考虑实现

- **网盘** ： 
- **分享 ： (好友功能)**
- 更多 ： 
	- 分享动态 
	- **垃圾文件清理**
	- 通话记录
	- 通讯录
	- 短信
	- 云冲印
	- 手机找回
	- **文章**
	- **记事本**
	- 照片电影
	- 企业网盘